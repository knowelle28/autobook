{% extends 'base.html' %}
{% block title %}Manage Services â€“ Admin{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="bi bi-list-ul me-2"></i>{{ t('admin_services_title') }}</h2>

<!-- Add service form -->
<div class="card mb-4 shadow-sm">
  <div class="card-header fw-semibold">{{ t('admin_add_service') }}</div>
  <div class="card-body">
    <form method="POST" action="{{ url_for('admin.services') }}" class="row g-3">
      <input type="hidden" name="action" value="add">
      <div class="col-md-4">
        <label class="form-label">{{ t('admin_col_name') }}</label>
        <input type="text" class="form-control" name="name" required placeholder="e.g. Haircut">
      </div>
      <div class="col-md-4">
        <label class="form-label">{{ t('admin_col_description') }}</label>
        <input type="text" class="form-control" name="description" placeholder="Short description">
      </div>
      <div class="col-md-2">
        <label class="form-label">{{ t('admin_col_duration_min') }}</label>
        <input type="number" class="form-control" name="duration_minutes" min="5" required placeholder="30">
      </div>
      <div class="col-md-2">
        <label class="form-label">{{ t('admin_col_price_usd') }}</label>
        <input type="number" class="form-control" name="price" min="0" step="0.01" required placeholder="25.00">
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-success">
          <i class="bi bi-plus-circle me-1"></i>{{ t('admin_add_service_btn') }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Services table -->
{% if services %}
<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead class="table-dark">
      <tr>
        <th>{{ t('admin_col_name') }}</th>
        <th>{{ t('admin_col_description') }}</th>
        <th class="text-center">{{ t('services_col_duration') }}</th>
        <th class="text-end">{{ t('services_col_price') }}</th>
        <th class="text-end">{{ t('admin_col_actions') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for s in services %}
      <tr>
        <form method="POST" action="{{ url_for('admin.services') }}">
          <input type="hidden" name="action" value="edit">
          <input type="hidden" name="service_id" value="{{ s.id }}">
          <td><input type="text" class="form-control form-control-sm" name="name" value="{{ s.name }}" required></td>
          <td><input type="text" class="form-control form-control-sm" name="description" value="{{ s.description }}"></td>
          <td class="text-center">
            <input type="number" class="form-control form-control-sm text-center" name="duration_minutes"
                   value="{{ s.duration_minutes }}" min="5" style="width:80px;display:inline-block">
          </td>
          <td class="text-end">
            <input type="number" class="form-control form-control-sm text-end" name="price"
                   value="{{ '%.2f' | format(s.price) }}" min="0" step="0.01" style="width:90px;display:inline-block">
          </td>
          <td class="text-end">
            <button type="submit" class="btn btn-sm btn-outline-primary me-1">{{ t('admin_save') }}</button>
        </form>
        <form method="POST" action="{{ url_for('admin.services') }}" style="display:inline"
              onsubmit="return confirm('{{ t('admin_delete_service_confirm') }}')">
          <input type="hidden" name="action" value="delete">
          <input type="hidden" name="service_id" value="{{ s.id }}">
          <button type="submit" class="btn btn-sm btn-outline-danger">{{ t('admin_delete') }}</button>
        </form>
          </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="alert alert-light border">{{ t('admin_no_services') }}</div>
{% endif %}
{% endblock %}
