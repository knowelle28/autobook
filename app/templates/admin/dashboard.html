{% extends 'base.html' %}
{% block title %}Admin Dashboard – AutoBook{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="bi bi-speedometer2 me-2"></i>{{ t('admin_dashboard_title') }}</h2>

<!-- Summary cards -->
<div class="row g-4 mb-5">
  <div class="col-md-4">
    <div class="card text-white bg-primary shadow-sm">
      <div class="card-body text-center">
        <div class="fs-1 fw-bold">{{ total_bookings }}</div>
        <div>{{ t('admin_total_bookings') }}</div>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card text-dark bg-warning shadow-sm">
      <div class="card-body text-center">
        <div class="fs-1 fw-bold">{{ pending_count }}</div>
        <div>{{ t('admin_pending') }}</div>
      </div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card text-white bg-success shadow-sm">
      <div class="card-body text-center">
        <div class="fs-1 fw-bold">{{ confirmed_count }}</div>
        <div>{{ t('admin_confirmed') }}</div>
      </div>
    </div>
  </div>
</div>

<!-- Today's bookings -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4 class="mb-0">{{ t('admin_todays_bookings') }} <small class="text-muted fs-6">{{ today.strftime('%A, %B %d') }}</small></h4>
  <a href="{{ url_for('admin.bookings') }}" class="btn btn-sm btn-outline-secondary">{{ t('admin_view_all') }}</a>
</div>

{% if today_bookings %}
<div class="table-responsive">
  <table class="table table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>{{ t('admin_col_id') }}</th>
        <th>{{ t('admin_col_customer') }}</th>
        <th>{{ t('admin_col_service') }}</th>
        <th>{{ t('admin_col_staff') }}</th>
        <th>{{ t('admin_col_time') }}</th>
        <th>{{ t('admin_col_status') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for b in today_bookings %}
      <tr>
        <td>#{{ b.id }}</td>
        <td>{{ b.user.name }}</td>
        <td>{{ b.service.name }}</td>
        <td>{{ b.staff.name }}</td>
        <td>{{ b.start_time.strftime('%H:%M') }} – {{ b.end_time.strftime('%H:%M') }}</td>
        <td>
          <span class="badge status-badge-{{ b.status }}">{{ b.status.capitalize() }}</span>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="alert alert-light border">{{ t('admin_no_today') }}</div>
{% endif %}

<!-- Quick links -->
<div class="row g-3 mt-2">
  <div class="col-md-3">
    <a href="{{ url_for('admin.bookings') }}" class="btn btn-outline-dark w-100">
      <i class="bi bi-calendar2-week me-1"></i>{{ t('nav_all_bookings') }}
    </a>
  </div>
  <div class="col-md-3">
    <a href="{{ url_for('admin.services') }}" class="btn btn-outline-dark w-100">
      <i class="bi bi-list-ul me-1"></i>{{ t('admin_manage_services') }}
    </a>
  </div>
  <div class="col-md-3">
    <a href="{{ url_for('admin.staff') }}" class="btn btn-outline-dark w-100">
      <i class="bi bi-people me-1"></i>{{ t('admin_manage_staff') }}
    </a>
  </div>
  <div class="col-md-3">
    <a href="{{ url_for('admin.hours') }}" class="btn btn-outline-dark w-100">
      <i class="bi bi-clock me-1"></i>{{ t('nav_business_hours') }}
    </a>
  </div>
</div>
{% endblock %}
