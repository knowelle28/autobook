{% extends 'base.html' %}
{% block title %}Manage Staff â€“ Admin{% endblock %}

{% block content %}
<h2 class="mb-4"><i class="bi bi-people me-2"></i>{{ t('admin_staff_title') }}</h2>

<!-- Add staff form -->
<div class="card mb-4 shadow-sm">
  <div class="card-header fw-semibold">{{ t('admin_add_staff') }}</div>
  <div class="card-body">
    <form method="POST" action="{{ url_for('admin.staff') }}" class="row g-3">
      <input type="hidden" name="action" value="add">
      <div class="col-md-4">
        <label class="form-label">{{ t('admin_col_name') }}</label>
        <input type="text" class="form-control" name="name" required placeholder="Jane Smith">
      </div>
      <div class="col-md-4">
        <label class="form-label">{{ t('admin_col_email') }}</label>
        <input type="email" class="form-control" name="email" required placeholder="jane@shop.com">
      </div>
      <div class="col-md-4">
        <label class="form-label">{{ t('admin_col_specialty') }}</label>
        <input type="text" class="form-control" name="specialty" placeholder="e.g. Haircut & Color">
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-success">
          <i class="bi bi-plus-circle me-1"></i>{{ t('admin_add_staff_btn') }}
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Staff table -->
{% if staff_list %}
<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead class="table-dark">
      <tr>
        <th>{{ t('admin_col_name') }}</th>
        <th>{{ t('admin_col_email') }}</th>
        <th>{{ t('admin_col_specialty') }}</th>
        <th class="text-end">{{ t('admin_col_actions') }}</th>
      </tr>
    </thead>
    <tbody>
      {% for member in staff_list %}
      <tr>
        <form method="POST" action="{{ url_for('admin.staff') }}">
          <input type="hidden" name="action" value="edit">
          <input type="hidden" name="staff_id" value="{{ member.id }}">
          <td><input type="text" class="form-control form-control-sm" name="name" value="{{ member.name }}" required></td>
          <td><input type="email" class="form-control form-control-sm" name="email" value="{{ member.email }}" required></td>
          <td><input type="text" class="form-control form-control-sm" name="specialty" value="{{ member.specialty }}"></td>
          <td class="text-end">
            <button type="submit" class="btn btn-sm btn-outline-primary me-1">{{ t('admin_save') }}</button>
        </form>
        <form method="POST" action="{{ url_for('admin.staff') }}" style="display:inline"
              onsubmit="return confirm('{{ t('admin_remove_staff_confirm') }}')">
          <input type="hidden" name="action" value="delete">
          <input type="hidden" name="staff_id" value="{{ member.id }}">
          <button type="submit" class="btn btn-sm btn-outline-danger">{{ t('admin_remove') }}</button>
        </form>
          </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% else %}
<div class="alert alert-light border">{{ t('admin_no_staff') }}</div>
{% endif %}
{% endblock %}
